(function($){$.extend({handleError:function(a,b,c,d){a.error&&a.error.call(a.context||a,b,c,d),a.global&&(a.context?$(a.context):$.event).trigger("ajaxError",[b,a,d])},createUploadIframe:function(a){var c="jUploadFrame"+a,d=document.createElement("iframe");return d.id=c,d.name=c,d.style.position="absolute",d.style.top="-1000px",d.style.left="-1000px",document.body.appendChild(d),d},createUploadForm:function(a,b,c){var d="jUploadForm"+a,e="jUploadFile"+a,f=$('<form  action="" method="POST" name="'+d+'" id="'+d+'" enctype="multipart/form-data"></form>'),g=$("#"+b),h=$(g).clone();if($(g).attr("id",e),$(g).before(h),$(g).appendTo(f),c)for(var i in c)$('<input type="hidden" name="'+i+'" value="'+c[i]+'" />').appendTo(f);return $(f).css("position","absolute"),$(f).css("top","-1200px"),$(f).css("left","-1200px"),$(f).appendTo("body"),f},ajaxFileUpload:function(a){a=$.extend({},$.ajaxSettings,a);var b=(new Date).getTime(),c=$.createUploadForm(b,a.fileElementId,a.data);$.createUploadIframe(b,a.secureuri);var e="jUploadFrame"+b,f="jUploadForm"+b;a.global&&!$.active++&&$.event.trigger("ajaxStart");var g=!1,h={};a.global&&$.event.trigger("ajaxSend",[h,a]);var i=function(b){var d=document.getElementById(e);try{d.contentWindow?(h.responseText=d.contentWindow.document.body?d.contentWindow.document.body.innerHTML:null,h.responseXML=d.contentWindow.document.XMLDocument?d.contentWindow.document.XMLDocument:d.contentWindow.document):d.contentDocument&&(h.responseText=d.contentDocument.document.body?d.contentDocument.document.body.innerHTML:null,h.responseXML=d.contentDocument.document.XMLDocument?d.contentDocument.document.XMLDocument:d.contentDocument.document)}catch(f){$.handleError(a,h,null,f)}if(h||"timeout"==b){g=!0;var i;try{if(i="timeout"!=b?"success":"error","error"!=i){var j=$.uploadHttpData(h,a.dataType);a.success&&a.success(j,i),a.global&&$.event.trigger("ajaxSuccess",[h,a])}else $.handleError(a,h,i)}catch(f){i="error",$.handleError(a,h,i,f)}a.global&&$.event.trigger("ajaxComplete",[h,a]),a.global&&!--$.active&&$.event.trigger("ajaxStop"),a.complete&&a.complete(h,i),$(d).unbind(),setTimeout(function(){try{$(d).remove(),$(c).remove()}catch(b){$.handleError(a,h,null,b)}},100),h=null}};a.timeout>0&&setTimeout(function(){g||i("timeout")},a.timeout);try{var c=$("#"+f);$(c).attr("action",a.url),$(c).attr("method","POST"),$(c).attr("target",e),c.encoding?c.encoding="multipart/form-data":c.enctype="multipart/form-data",$(c).submit()}catch(j){$.handleError(a,h,null,j)}return window.attachEvent?document.getElementById(e).attachEvent("onload",i):document.getElementById(e).addEventListener("load",i,!1),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&$.globalEval(data),"json"==type&&eval("data = "+data),"html"==type&&$("<div>").html(data).evalScripts(),data}})})(window.jQuery);